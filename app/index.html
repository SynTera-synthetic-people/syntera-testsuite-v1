<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SynTera Test Suite</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div id="app" class="app-shell">
            <aside class="sidebar" style="position: relative;">
                <button class="sidebar-toggle" onclick="toggleSidebar()" title="Toggle sidebar">‚ò∞</button>
                <div class="brand">
                    <div class="brand-mark">SP</div>
                    <div>
                        <h1>SynTera</h1>
                        <p>Synthetic People Test Suite</p>
                    </div>
                </div>
                <div class="user-auth-section" style="margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(55, 65, 81, 0.5);">
                    <div id="user-info-display" style="display: none;">
                        <div style="font-size: 0.75rem; color: #9ca3af; margin-bottom: 4px;">Logged in as</div>
                        <div id="username-display" style="font-size: 0.85rem; color: #e5e7eb; font-weight: 600; margin-bottom: 8px;"></div>
                        <div id="user-role-display" style="font-size: 0.7rem; color: #6b7280; margin-bottom: 8px;"></div>
                        <button onclick="logout()" class="btn-logout" style="width: 100%; padding: 6px; font-size: 0.75rem; background: rgba(239, 68, 68, 0.2); border: 1px solid rgba(239, 68, 68, 0.4); color: #fca5a5; border-radius: 6px; cursor: pointer;">Logout</button>
                    </div>
                    <div id="login-form-display" style="display: none;">
                        <label class="field-label" style="font-size: 0.75rem;">
                            Username
                            <input type="text" id="login-username" placeholder="user or super" style="margin-top: 4px; width: 100%;" />
                        </label>
                        <label class="field-label" style="font-size: 0.75rem;">
                            Password
                            <input type="password" id="login-password" placeholder="password" style="margin-top: 4px; width: 100%;" />
                        </label>
                        <button onclick="handleLogin()" class="btn-primary" style="width: 100%; margin-top: 8px; padding: 8px; font-size: 0.8rem;">Login</button>
                        <div style="font-size: 0.65rem; color: #6b7280; margin-top: 8px; text-align: center;">
                            Default: user/user123 or super/super123
                        </div>
                    </div>
                </div>
                <p class="sidebar-label">Workspace</p>
                <ul class="nav-list">
                    <li><button onclick="showSection('home')" id="nav-home" class="nav-item active">üè† Home</button></li>
                    <li><button onclick="showSection('reports'); loadDashboard();" id="nav-dashboard-reports" class="nav-item">Dashboard & Reports</button></li>
                    <li><button onclick="showSection('surveys')" id="nav-surveys" class="nav-item">Surveys</button></li>
                    <li><button onclick="showSection('validation')" id="nav-validation" class="nav-item">Validation Runs</button></li>
                    <li><button onclick="showSection('results')" id="nav-results" class="nav-item">Test Results</button></li>
                    <li><button onclick="showSection('industry-surveys')" id="nav-industry-surveys" class="nav-item">Industry Surveys</button></li>
                    <li><button onclick="showSection('market-research')" id="nav-market-research" class="nav-item">Market Research Reverse Eng.</button></li>
                </ul>
            </aside>
        <main class="main">
            <header class="top-bar">
                <div>
                    <h2 id="section-title">Home</h2>
                    <p class="subtitle" id="section-subtitle">Welcome to SynTera Test Suite - Statistical Validation Framework</p>
                </div>
            </header>
            <section id="home" class="section active">
                <div class="home-hero">
                    <div class="hero-content">
                        <div class="hero-icon">üìä</div>
                        <h1 class="hero-title">SynTera Test Suite</h1>
                        <p class="hero-subtitle">Advanced Statistical Validation Framework for Synthetic Data</p>
                        <div class="hero-badges">
                            <span class="badge">97.8% Accuracy</span>
                            <span class="badge">8 Statistical Tests</span>
                            <span class="badge">Production Ready</span>
                        </div>
                    </div>
                </div>

                <div class="home-section">
                    <div class="section-card">
                        <div class="card-icon">üéØ</div>
                        <h2>What is SynTera?</h2>
                        <p>SynTera Test Suite is a comprehensive statistical validation framework designed to evaluate and compare synthetic survey data against real-world datasets. It provides rigorous statistical analysis to ensure synthetic data maintains the statistical properties and distributions of original data.</p>
                        <div class="feature-grid">
                            <div class="feature-item">
                                <span class="feature-icon">üî¨</span>
                                <div>
                                    <h4>Scientific Approach</h4>
                                    <p>Based on proven statistical methodologies</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">‚ö°</span>
                                <div>
                                    <h4>Fast & Efficient</h4>
                                    <p>Real-time validation and comparison</p>
                                </div>
                            </div>
                            <div class="feature-item">
                                <span class="feature-icon">üìà</span>
                                <div>
                                    <h4>Comprehensive Analysis</h4>
                                    <p>Multiple statistical tests in one platform</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="home-section">
                    <div class="section-card">
                        <div class="card-icon">üéØ</div>
                        <h2>Purpose</h2>
                        <p>SynTera Test Suite serves as a critical validation tool for organizations working with synthetic data, ensuring data quality, statistical accuracy, and reliability before deployment in production environments.</p>
                        <div class="purpose-grid">
                            <div class="purpose-card">
                                <div class="purpose-number">01</div>
                                <h3>Data Quality Assurance</h3>
                                <p>Validate that synthetic data maintains statistical properties of original datasets</p>
                            </div>
                            <div class="purpose-card">
                                <div class="purpose-number">02</div>
                                <h3>Risk Mitigation</h3>
                                <p>Identify discrepancies before deploying synthetic data in production</p>
                            </div>
                            <div class="purpose-card">
                                <div class="purpose-number">03</div>
                                <h3>Compliance & Standards</h3>
                                <p>Ensure synthetic data meets regulatory and industry standards</p>
                            </div>
                            <div class="purpose-card">
                                <div class="purpose-number">04</div>
                                <h3>Research & Development</h3>
                                <p>Support research initiatives requiring validated synthetic datasets</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="home-section">
                    <div class="section-card">
                        <div class="card-icon">üöÄ</div>
                        <h2>How to Use</h2>
                        <p>Getting started with SynTera Test Suite is simple and straightforward. Follow these steps to begin validating your synthetic data:</p>
                        <div class="steps-container">
                            <div class="step-item">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h3>Upload Your Data</h3>
                                    <p>Navigate to <strong>Validation Runs</strong> and upload your seed (real) and synthetic data files in CSV or Excel format</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h3>Select Extraction Method</h3>
                                    <p>Choose your preferred extraction method (JSON, CSV, or Excel) for data processing</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h3>Run Comparison</h3>
                                    <p>Click <strong>Compare Files</strong> to initiate statistical analysis across 8 different tests</p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">4</div>
                                <div class="step-content">
                                    <h3>Review Results</h3>
                                    <p>View detailed question-by-question comparisons and statistical methodology in <strong>Test Results</strong></p>
                                </div>
                            </div>
                            <div class="step-item">
                                <div class="step-number">5</div>
                                <div class="step-content">
                                    <h3>Access Reports</h3>
                                    <p>Explore comprehensive reports in <strong>Dashboard & Reports</strong> with accuracy metrics and validation summaries</p>
                                </div>
                            </div>
                        </div>
                        <div class="cta-buttons">
                            <button onclick="showSection('validation')" class="cta-primary">Start Validation ‚Üí</button>
                            <button onclick="showSection('industry-surveys')" class="cta-secondary">Explore Industry Surveys ‚Üí</button>
                        </div>
                    </div>
                </div>

                <div class="home-section">
                    <div class="section-card">
                        <div class="card-icon">‚ú®</div>
                        <h2>Key Benefits</h2>
                        <p>SynTera Test Suite provides numerous advantages for organizations working with synthetic data:</p>
                        <div class="benefits-grid">
                            <div class="benefit-card">
                                <div class="benefit-icon">üéØ</div>
                                <h3>High Accuracy</h3>
                                <p>Achieve 97.8% accuracy in statistical validation, ensuring reliable synthetic data generation</p>
                            </div>
                            <div class="benefit-card">
                                <div class="benefit-icon">üîç</div>
                                <h3>Comprehensive Testing</h3>
                                <p>8 different statistical tests including Chi-square, Kolmogorov-Smirnov, Mann-Whitney U, and more</p>
                            </div>
                            <div class="benefit-card">
                                <div class="benefit-icon">‚ö°</div>
                                <h3>Real-time Analysis</h3>
                                <p>Get instant results with question-by-question comparison and detailed statistical insights</p>
                            </div>
                            <div class="benefit-card">
                                <div class="benefit-icon">üìä</div>
                                <h3>Visual Dashboards</h3>
                                <p>Interactive dashboards with pagination, 2x2 grid layouts, and comprehensive reporting</p>
                            </div>
                            <div class="benefit-card">
                                <div class="benefit-icon">üîê</div>
                                <h3>Role-Based Access</h3>
                                <p>Secure access control with User and Super User roles for different permission levels</p>
                            </div>
                            <div class="benefit-card">
                                <div class="benefit-icon">üåê</div>
                                <h3>Industry Standards</h3>
                                <p>Access to industry survey references and validation reports across multiple domains</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="home-section">
                    <div class="stats-showcase">
                        <div class="stat-showcase-item">
                            <div class="stat-value">8</div>
                            <div class="stat-label">Statistical Tests</div>
                        </div>
                        <div class="stat-showcase-item">
                            <div class="stat-value">97.8%</div>
                            <div class="stat-label">Average Accuracy</div>
                        </div>
                        <div class="stat-showcase-item">
                            <div class="stat-value">6</div>
                            <div class="stat-label">Industry Domains</div>
                        </div>
                        <div class="stat-showcase-item">
                            <div class="stat-value">‚àû</div>
                            <div class="stat-label">Unlimited Validations</div>
                        </div>
                    </div>
                </div>
            </section>
            <section id="reports" class="section">
                <div class="section-header-row">
                    <div>
                        <h2>Dashboard & Reports</h2>
                        <p class="subtitle">Metrics, statistics, and validation reports for all completed surveys.</p>
                    </div>
                </div>
                
                <!-- Dashboard Stats Section -->
                <div id="dashboard-stats-container" style="margin-bottom: 32px;">
                    <div class="stats">
                        <div class="stat-card"><h3>Total Surveys</h3><p id="total-surveys">0</p></div>
                        <div class="stat-card"><h3>Validated</h3><p id="validated-surveys">0</p></div>
                        <div class="stat-card"><h3>Avg Accuracy</h3><p id="avg-accuracy">0%</p></div>
                    </div>
                </div>
                
                <!-- Reports Section -->
                <div class="reports-section-header">
                    <h3>Validation Reports</h3>
                </div>
                <div id="reports-list" class="reports-grid-2x2"></div>
                <div id="reports-pagination" class="pagination-container"></div>
            </section>
            <section id="surveys" class="section">
                <div class="section-header-row">
                    <div>
                        <h2>Surveys</h2>
                        <p class="subtitle">Each survey represents one experiment run.</p>
                    </div>
                    <button onclick="createNewSurvey()" class="btn-primary">New Survey Comparison</button>
                </div>
                <div id="surveys-list" class="cards-grid"></div>
                <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid rgba(148, 163, 184, 0.2);">
                    <button onclick="showSection('validation')" class="btn-primary">‚Üí Go to Validation Runs</button>
                </div>
            </section>
            <section id="validation" class="section">
                <div class="section-header-row">
                    <div>
                        <h2>Validation Runs</h2>
                        <p class="subtitle">Compare two questionnaires via file upload or manual data entry.</p>
                    </div>
                </div>
                <div class="validation-tabs">
                    <button class="tab-btn active" onclick="switchTab('files')" id="tab-files">üìÅ File Upload</button>
                    <button class="tab-btn" onclick="switchTab('manual')" id="tab-manual">‚úèÔ∏è Manual Entry</button>
                </div>
                <div id="tab-content-files" class="tab-content active">
                    <div class="two-column">
                        <div class="panel">
                            <h3>1. Upload questionnaire files</h3>
                            <p class="help-text">Upload Excel (.xlsx, .xls) or CSV files containing survey responses.</p>
                            <label class="field-label">Questionnaire 1 (Synthetic/File A)
                                <input type="file" id="file-synthetic" accept=".xlsx,.xls,.csv" />
                                <small class="file-info" id="file-synthetic-info">No file selected</small>
                            </label>
                            <label class="field-label">Questionnaire 2 (Real/File B)
                                <input type="file" id="file-real" accept=".xlsx,.xls,.csv" />
                                <small class="file-info" id="file-real-info">No file selected</small>
                            </label>
                            <label class="field-label">Survey ID (optional)
                                <input id="file-survey-id" type="text" placeholder="Paste survey ID from Surveys panel (leave empty to create new)" />
                            </label>
                            <label class="field-label">Extraction Method
                                <select id="extraction-method">
                                    <option value="totals">Totals (sum per column)</option>
                                    <option value="all">All responses (individual values)</option>
                                </select>
                            </label>
                            <button class="btn-primary full-width" onclick="compareFiles()">Compare Files</button>
                        </div>
                        <div class="panel">
                            <h3>2. Ready to compare</h3>
                            <p class="help-text">Click "Compare Files" to run the validation. Results will appear on the Test Results page.</p>
                        </div>
                    </div>
                </div>
                <div id="tab-content-manual" class="tab-content">
                    <div class="two-column">
                        <div class="panel">
                            <h3>1. Select survey &amp; data</h3>
                            <label class="field-label">Survey ID
                                <input id="validation-survey-id" type="text" placeholder="Paste survey ID from Surveys panel" />
                            </label>
                            <label class="field-label">Synthetic responses (JSON array)
                                <textarea id="synthetic-input" rows="4" placeholder="[42, 33, 18, 7]"></textarea>
                            </label>
                            <label class="field-label">Real responses (JSON array)
                                <textarea id="real-input" rows="4" placeholder="[40, 35, 20, 5]"></textarea>
                            </label>
                            <button class="btn-primary full-width" onclick="runValidation()">Run Validation</button>
                        </div>
                        <div class="panel">
                            <h3>2. Ready to validate</h3>
                            <p class="help-text">Click "Run Validation" to start. Results will appear on the Test Results page.</p>
                        </div>
                    </div>
                </div>
            </section>
            <section id="results" class="section">
                <div class="section-header-row">
                    <div>
                        <h2>Test Results</h2>
                        <p class="subtitle">Compare synthetic vs real survey responses question-by-question.</p>
                    </div>
                    <button onclick="showSection('validation')" class="btn-primary">‚Üê Run New Validation</button>
                </div>
                <div id="results-content">
                    <div class="empty-results-state">
                        <div class="empty-icon">üìä</div>
                        <h3>No Results Yet</h3>
                        <p>Run a validation from the Validation Runs page to see results here.</p>
                        <button onclick="showSection('validation')" class="btn-primary">Go to Validation Runs</button>
                    </div>
                </div>
            </section>
            <section id="industry-surveys" class="section">
                <div class="section-header-row">
                    <div>
                        <h2>Industry Survey Reports</h2>
                        <p class="subtitle">Industry-specific surveys and data from S3, plus reference surveys across domains.</p>
                    </div>
                </div>
                <div id="industry-surveys-s3-container" class="industry-s3-section" style="margin-bottom: 28px;">
                    <h3 class="industry-subsection-title">Industry data (S3)</h3>
                    <p class="help-text" id="industry-s3-help">Loading‚Ä¶</p>
                    <div id="industry-surveys-s3-list" class="cards-grid"></div>
                </div>
                <h3 class="industry-subsection-title">Reference surveys</h3>
                <div id="industry-surveys-list" class="cards-grid"></div>
            </section>
            <section id="market-research" class="section">
                <div class="section-header-row">
                    <div>
                        <h2>Market Research Reverse Engineering</h2>
                        <p class="subtitle">Upload a market research report to reverse-engineer the original research design and reconstructed questionnaire.</p>
                    </div>
                </div>
                <div class="market-research-container">
                    <div class="panel">
                        <h3>Input Report</h3>
                        <p class="help-text">Paste report text below or upload a .txt or .pdf file. Minimum 50 characters required.</p>
                        <p class="help-text" style="margin-top:4px; color: #94a3b8; font-size: 0.85rem;">Only text is read from the report; charts and images are not.</p>
                        <label class="field-label">
                            Report text
                            <textarea id="market-research-report-text" rows="10" placeholder="Paste executive summary, charts, findings, consumer quotes, key recommendations..."></textarea>
                        </label>
                        <div class="market-research-upload-row">
                            <label class="field-label" style="flex:1;">
                                Or upload file
                                <input type="file" id="market-research-file" accept=".txt,.pdf" />
                            </label>
                            <button type="button" class="btn-secondary" id="market-research-load-sample" title="Load text from sample_market_research_report.pdf in project root">Load sample PDF</button>
                            <button type="button" class="btn-primary" id="market-research-submit">Reverse-Engineer</button>
                        </div>
                        <div id="market-research-status" class="market-research-status" style="display:none;"></div>
                    </div>
                    <div class="panel" id="market-research-output-panel" style="display:none;">
                        <div class="market-research-download-row">
                            <button type="button" class="btn-primary" id="market-research-download-pdf">Download result (PDF)</button>
                            <button type="button" class="btn-secondary" id="market-research-download-csv">Download questionnaire (CSV)</button>
                        </div>
                        <div id="market-research-section-objectives" class="market-research-section-panel">
                            <h3>1. Research Objective</h3>
                            <div id="market-research-output-objectives" class="market-research-output"></div>
                        </div>
                        <div id="market-research-section-questionnaire" class="market-research-section-panel">
                            <h3>2. Questionnaire</h3>
                            <div id="market-research-output-questionnaire" class="market-research-output market-research-questionnaire-list"></div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>

